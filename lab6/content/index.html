<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Лабораторная работа</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div>
<!--        <button onclick="update()" class="btn-white">Обновить</button>-->
        <button class="butt" onclick="loadEntries()">Update</button>
    </div>


    <div id="rss-information">
<!--        <p>Американские ученые провели анализ библиотеки белков и метаболитов, связанных с различными областями генома человека. Результаты исследования, опубликованные в New England Journal of Medicine, проливают свет на генетические факторы риска, которые делают людей более восприимчивыми к тяжелой форме COVID-19.</p> <p style="text-align: center;"><img alt="" src="https://cdn25.img.ria.ru/images/07e4/03/1b/1569221900_0:56:1440:866_1280x0_80_0_0_d2b4d5706bc50923d3b510773f837fd1.jpg.webp" style="width: 600px; height: 338px;" /></p> <p>Несмотря на огромную медицинскую статистику случаев COVID-19 в мире, медики до сих пор не знают, почему у одних пациентов заболевание протекает бессимптомно, а у других сопровождается тяжелыми осложнениями. Исследователи из медицинского центра Beth Israel Deacones...-->
    </div>


    <script type="text/javascript">
        let cur_page = 1;
        let cur_site = "ecowars";
        let last_page = false;
        function update(){
            fetch(`/load?site=${cur_site}`)
                .then(x => {
                alert('Обновлено.')
        });
        }

        function loadEntries() {
        fetch(`/view?site=${cur_site}&page=${cur_page}`)
            .then(resp => resp.json())
            .then(json => {
                const content = document.getElementById('rss-information');
                content.innerHTML = '';

                const entries = json['entries'];
                for (const entry of entries) {
                    content.innerHTML += `<div class="item">
                        <div class="title">${entry[1]}</div>
                        <div class="description">${entry[2]}</div>
                        <div class="link">${entry[3]}</div>
                    </div>`;
                }
                last_page = entries.length < 10;
                drawNextPage();
                if (last_page) {
                    content.innerHTML += "<div>Больше ничего нет.</div>";
                }
            });
}
    </script>
</body>
</html>